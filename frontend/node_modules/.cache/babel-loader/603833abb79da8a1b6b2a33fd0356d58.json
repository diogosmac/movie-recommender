{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\merta\\\\Desktop\\\\movie-recommender-backendimp\\\\frontend\\\\src\\\\components\\\\login.js\";\nimport React from 'react';\nimport { useState, useEffect } from 'react';\nimport Box from '@mui/material/Box';\nimport TextField from '@mui/material/TextField';\nimport { Container, Paper, Button } from '@mui/material';\nimport axios from 'axios';\nimport TopAppBar from './AppBar';\nimport Typography from '@mui/material/Typography';\nimport { Link, Navigate } from 'react-router-dom';\nimport { SERVER_HOST, GUEST_LEVEL } from '../config/global_constants';\n\nconst LogIn = () => {\n  const paperStyle = {\n    padding: \"50px 20px\",\n    width: 600,\n    margin: \"20px auto\"\n  };\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [isUserLogged, setUserLogged] = useState(false);\n  const [errorMessage, setErrorMessage] = useState('');\n  const [errorFlag, setErrorFlag] = useState(false);\n\n  const handleOnClick = e => {\n    e.preventDefault();\n    const loggingCrudentials = {\n      email,\n      password\n    };\n    setErrorFlag(false);\n    axios.post(`${SERVER_HOST}/users/loginUser`, loggingCrudentials).then(res => {\n      const user = {\n        name: res.data.name,\n        email: res.data.email,\n        accessLevel: res.data.accessLevel,\n        token: res.data.tokens.access_token,\n        img: res.data.img\n      };\n      localStorage.setItem(\"user\", JSON.stringify(user));\n      setUserLogged(true);\n    }).catch(err => {\n      setErrorFlag(true);\n      setErrorMessage(err.response.data.message);\n    });\n  };\n\n  useEffect(() => {\n    const user = JSON.parse(localStorage.getItem(\"user\"));\n\n    if (user.accessLevel > GUEST_LEVEL) {\n      setUserLogged(true);\n    }\n  }, []);\n  return React.createElement(\"div\", {\n    className: \"LogIn\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59\n    },\n    __self: this\n  }, React.createElement(TopAppBar, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60\n    },\n    __self: this\n  }), React.createElement(Container, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61\n    },\n    __self: this\n  }, React.createElement(Paper, {\n    elevation: 3,\n    style: paperStyle,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62\n    },\n    __self: this\n  }, React.createElement(\"h1\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63\n    },\n    __self: this\n  }, \"Log in to your account.\"), React.createElement(Box, {\n    component: \"form\",\n    sx: {\n      '& > :not(style)': {\n        m: 'auto',\n        mt: 1,\n        width: '40ch'\n      }\n    },\n    noValidate: true,\n    autoComplete: \"off\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64\n    },\n    __self: this\n  }, React.createElement(TextField, {\n    label: \"E-mail\",\n    variant: \"outlined\",\n    value: email,\n    onChange: e => {\n      setEmail(e.target.value);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72\n    },\n    __self: this\n  }), React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76\n    },\n    __self: this\n  }), React.createElement(TextField, {\n    label: \"Password\",\n    variant: \"outlined\",\n    type: \"password\",\n    value: password,\n    onChange: e => {\n      setPassword(e.target.value);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77\n    },\n    __self: this\n  }), React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81\n    },\n    __self: this\n  }), errorFlag ? React.createElement(Typography, {\n    color: \"red\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82\n    },\n    __self: this\n  }, errorMessage) : '', React.createElement(Button, {\n    variant: \"outlined\",\n    color: \"success\",\n    onClick: handleOnClick,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83\n    },\n    __self: this\n  }, \"Log in\"), React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83\n    },\n    __self: this\n  }), \"Don't have an account? \", React.createElement(Link, {\n    to: \"/SignUp\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84\n    },\n    __self: this\n  }, \"Sign up!\")))));\n};\n\nexport default LogIn;","map":{"version":3,"sources":["C:/Users/merta/Desktop/movie-recommender-backendimp/frontend/src/components/login.js"],"names":["React","useState","useEffect","Box","TextField","Container","Paper","Button","axios","TopAppBar","Typography","Link","Navigate","SERVER_HOST","GUEST_LEVEL","LogIn","paperStyle","padding","width","margin","email","setEmail","password","setPassword","isUserLogged","setUserLogged","errorMessage","setErrorMessage","errorFlag","setErrorFlag","handleOnClick","e","preventDefault","loggingCrudentials","post","then","res","user","name","data","accessLevel","token","tokens","access_token","img","localStorage","setItem","JSON","stringify","catch","err","response","message","parse","getItem","m","mt","target","value"],"mappings":"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","sourcesContent":["import React from 'react'\nimport { useState, useEffect } from 'react';\nimport Box from '@mui/material/Box';\nimport TextField from '@mui/material/TextField';\nimport { Container, Paper, Button } from '@mui/material';\nimport axios from 'axios';\nimport TopAppBar from './AppBar';\nimport Typography from '@mui/material/Typography';\nimport { Link, Navigate } from 'react-router-dom';\nimport { SERVER_HOST, GUEST_LEVEL } from '../config/global_constants';\n\nconst LogIn = () => {\n    const paperStyle = {\n        padding: \"50px 20px\",\n        width: 600,\n        margin: \"20px auto\",\n    }\n    const [email, setEmail] = useState('')\n    const [password, setPassword] = useState('')\n    const [isUserLogged, setUserLogged] = useState(false)\n    const [errorMessage, setErrorMessage] = useState('')\n    const [errorFlag, setErrorFlag] = useState(false)\n\n    const handleOnClick = (e) => {\n        e.preventDefault()\n        const loggingCrudentials = {\n            email,\n            password\n        }\n        setErrorFlag(false)\n        axios.post(`${SERVER_HOST}/users/loginUser`, loggingCrudentials)\n            .then(res => {\n                const user = {\n                    name: res.data.name,\n                    email: res.data.email,\n                    accessLevel: res.data.accessLevel,\n                    token: res.data.tokens.access_token,\n                    img: res.data.img\n                }\n                localStorage.setItem(\"user\", JSON.stringify(user))\n                setUserLogged(true)\n            })\n            .catch(err => {\n                setErrorFlag(true)\n                setErrorMessage(err.response.data.message)\n            })\n    }\n\n    useEffect(() => {\n        const user = JSON.parse(localStorage.getItem(\"user\"))\n        if (user.accessLevel > GUEST_LEVEL) {\n            setUserLogged(true)\n        }\n    }, [])\n\n\n\n    return (\n        <div className=\"LogIn\">\n            <TopAppBar />\n            <Container>\n                <Paper elevation={3} style={paperStyle}>\n                    <h1>Log in to your account.</h1>\n                    <Box\n                        component=\"form\"\n                        sx={{\n                            '& > :not(style)': { m: 'auto', mt: 1, width: '40ch' },\n                        }}\n                        noValidate\n                        autoComplete=\"off\"\n                    >\n                        <TextField label=\"E-mail\" variant=\"outlined\"\n                            value={email}\n                            onChange={(e) => {\n                                setEmail(e.target.value)\n                            }} /><br />\n                        <TextField label=\"Password\" variant=\"outlined\" type=\"password\"\n                            value={password}\n                            onChange={(e) => {\n                                setPassword(e.target.value)\n                            }} /><br />\n                        {errorFlag ? <Typography color=\"red\">{errorMessage}</Typography> : ''}\n                        <Button variant=\"outlined\" color=\"success\" onClick={handleOnClick}>Log in</Button><br />\n                        Don't have an account? <Link to=\"/SignUp\">Sign up!</Link>\n\n                    </Box>\n                </Paper>\n            </Container>\n        </div>\n    );\n}\n\nexport default LogIn;"]},"metadata":{},"sourceType":"module"}